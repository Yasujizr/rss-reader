# About the rewrite-url module
This module is conceptually based on Apache's mod_rewrite module. The `rewrite_url` function changes a url based on a set of rewriting rules. A typical reason to use this is to reduce the number of urls in a list of urls where the first url redirects to each subsequent url. In other words, given a list of urls, reduce the list to a single url.

Here, redirect is defined loosely to account for atypical redirection methods. For example, a comment technique used by some websites is to pass outgoing link clicks through an intermediate page that tracks the clicks before continuing. The use of that intermediate page is something I do not like because of its network inefficiency and telemetry.

## TODO: do not hardcode rules
The rule set should be externally configurable and not require changes to the code. My current guess as to how this would be done would be to add a rules parameter to rewrite_url, move all rules array creation to an external file or perhaps exclusively to the caller, have the caller setup the rules array in some manner (I mean right now it is singleton and such), and also maybe add some very minor validation to rewrite_url to account for externally-defined rules. In other words basically move all rule management outside of this, it is no longer this module's concern. Of course this is half of it. I think eventually it should be this module's concern. Not the specific rules, but this module should expose some API for building rules or parsing rules from some serializable format. This is what I am really struggling with because right now the rules are functions.
